!function(z){z.fn.bValidator=function(e,a){return this.each(function(){new bValidator(z(this),e,a)})},bValidator=function(n,e,O){var l,E={singleError:!1,offset:{x:-23,y:-4},position:{x:"right",y:"top"},template:'<div class="{errMsgClass}"><em/>{message}</div>',templateCloseIcon:'<div style="display:table"><div style="display:table-cell">{message}</div><div style="display:table-cell"><div class="{closeIconClass}">x</div></div></div>',showCloseIcon:!0,showErrMsgSpeed:"normal",scrollToError:!0,classNamePrefix:"bvalidator_",closeIconClass:"close_icon",errMsgClass:"errmsg",errorClass:"invalid",validClass:"",lang:"en",errorMessageAttr:"data-bvalidator-msg",validateActionsAttr:"data-bvalidator",forceValidAttr:"data-bvalidator-forcevalid",modifyActionsAttr:"data-bvalidator-modifier",paramsDelimiter:":",actionsDelimiter:",",validateOn:null,errorValidateOn:"keyup",onBeforeValidate:null,onAfterValidate:null,onValidateFail:null,onValidateSuccess:null,onBeforeElementValidation:null,onAfterElementValidation:null,onBeforeAllValidations:null,onAfterAllValidations:null,validateOnSubmit:!0,stopSubmitPropagation:!0,noMsgIfExistsForInstance:[],validateTillInvalid:!1,autoModifiers:{digit:["trim"],number:["trim"],email:["trim"],url:["trim"],date:["trim"],ip4:["trim"],ip6:["trim"]},ajaxAnswerValid:"ok",ajaxDelay:300,ajaxOptions:{cache:!1},ajaxParamName:"bValue",ajaxParams:null,errorMessages:{en:{default:"Please correct this value.",equalto:"Please enter the same value again.",differs:"Please enter a different value.",minlength:"The length must be at least {0} characters",maxlength:"The length must be at max {0} characters",rangelength:"The length must be between {0} and {1}",min:"Please enter a number greater than or equal to {0}.",max:"Please enter a number less than or equal to {0}.",between:"Please enter a number between {0} and {1}.",required:"This field is required.",alpha:"Please enter alphabetic characters only.",alphanum:"Please enter alphanumeric characters only.",digit:"Please enter only digits.",number:"Please enter a valid number.",email:"Please enter a valid email address.",image:"This field should only contain image types",url:"Please enter a valid URL.",ip4:"Please enter a valid IPv4 address.",ip6:"Please enter a valid IPv6 address.",date:"Please enter a valid date in format {0}."}}},D=function(t,e,a,n){var r=t.data("ajaxData.bV"+e);if(r?clearTimeout(r.timeOut):(r={},t.data("ajaxData.bV"+e,r)),r.val=t.val(),r.lastValidated===r.val)return B.ajax(r.lastResponse);var i=z.extend({},E.ajaxOptions);if("object"!=typeof i.data&&(i.data={}),i.url=a,E.ajaxParams&&z.extend(!0,i.data,"function"==typeof E.ajaxParams?E.ajaxParams.call(t[0]):E.ajaxParams),n){var s=!1;return i.async=!1,i.data[E.ajaxParamName]=r.val,z.ajax(i).done(function(e){r.lastValidated=r.val,r.lastResponse=e,s=B.ajax(e)}),s}r.timeOut=setTimeout(function(){var a=t.val();r.val==a&&(i.async=!0,i.data[E.ajaxParamName]=a,z.ajax(i).done(function(e){r.lastValidated=a,r.lastResponse=e,Z.validate(!1,t,void 0,e)}))},E.ajaxDelay)},r=function(e){return e.is(":input")?e:e.find(":input["+E.validateActionsAttr+"], :input["+E.modifyActionsAttr+"]").not(":button, :image, :reset, :submit, :hidden, :disabled")},k=function(e){e.bind(E.validateOn+".bV"+O,{bVInstance:Z},function(e){e.data.bVInstance.validate(!1,z(this))})},T=function(e,a){N(e),msg_container=z('<div class="bVErrMsgContainer"></div>').css("position","absolute"),e.data("errMsg.bV"+O,msg_container),msg_container.insertAfter(e);for(var t="",n=0;n<a.length;n++)t+="<div>"+a[n]+"</div>\n";E.showCloseIcon&&(t=E.templateCloseIcon.replace("{message}",t).replace("{closeIconClass}",E.classNamePrefix+E.closeIconClass));var r=z(E.template.replace("{errMsgClass}",E.classNamePrefix+E.errMsgClass).replace("{message}",t));r.appendTo(msg_container),r.find("."+E.classNamePrefix+E.closeIconClass).click(function(e){e.preventDefault(),z(this).closest("."+E.classNamePrefix+E.errMsgClass).css("visibility","hidden")});var i=o(e,r);if(r.css({visibility:"visible",position:"absolute",top:i.top,left:i.left}).fadeIn(E.showErrMsgSpeed),E.scrollToError){var s=r.offset().top;(null===l||s<l)&&(l=s)}},N=function(e){var a=e.data("errMsg.bV"+O);a&&(a.remove(),e.data("errMsg.bV"+O,null))},o=function(e,a){var t=e.data("errMsg.bV"+O),n=-(t.offset().top-e.offset().top+a.outerHeight()-E.offset.y),r=e.offset().left+e.outerWidth()-t.offset().left+E.offset.x,i=E.position.x,s=E.position.y;if("center"==s||"bottom"==s){var l=a.outerHeight()+e.outerHeight();"center"==s&&(n+=l/2),"bottom"==s&&(n+=l)}if("center"==i||"left"==i){var o=e.outerWidth();"center"==i&&(r-=o/2),"left"==i&&(r-=o)}return{top:n,left:r}},$=function(e,a,t,n){if(z.isFunction(E[e]))return E[e](a,t,n)},_=function(e){var a=e.attr("name");return a&&/^[^\[\]]+\[.*\]$/.test(a)?z("input:checkbox").filter(function(){var e=new RegExp(a.match(/^[^\[\]]+/)[0]+"\\[.*\\]$");return this.name.match(e)}):e},q=function(e){var a=z.trim(e).replace(new RegExp("\\s*\\"+E.actionsDelimiter+"\\s*","g"),E.actionsDelimiter);return a?a.split(E.actionsDelimiter):null},G=function(e){var a=z.trim(e).match(/^(.*?)\[(.*?)\]/);return a&&3==a.length?{name:a[1],params:a[2].split(E.paramsDelimiter)}:{name:e,params:[]}},R=function(e,a){var t=i(e,a);void 0!==t&&z(a).val()!=t&&z(a).val(t)},i=function(e,a){var t=[z(a).val()].concat(e.params);return"function"==typeof s[e.name]?s[e.name].apply(a,t):"function"==typeof window[e.name]?window[e.name].apply(a,t):void(window.console.warn&&window.console.warn("[bValidator] unknown modifier: "+e.name))},S=function(e,a,t){return"function"==typeof B[e.name]?B[e.name].apply(a,[t].concat(e.params)):"function"==typeof window[e.name]?window[e.name].apply(a,[t.value].concat(e.params)):void(window.console.warn&&window.console.warn("[bValidator] unknown validator: "+e.name))},B={equalto:function(e,a){return e.value==z("#"+a).val()},differs:function(e,a){return e.value!=z("#"+a).val()},minlength:function(e,a){return e.value.length>=parseInt(a)},maxlength:function(e,a){return e.value.length<=parseInt(a)},rangelength:function(e,a,t){return e.value.length>=parseInt(a)&&e.value.length<=parseInt(t)},min:function(e,a){return e.selectedInGroup?e.selectedInGroup>=parseFloat(a):!!B.number(e)&&parseFloat(e.value)>=parseFloat(a)},max:function(e,a){return e.selectedInGroup?e.selectedInGroup<=parseFloat(a):!!B.number(e)&&parseFloat(e.value)<=parseFloat(a)},between:function(e,a,t){if(e.selectedInGroup)return e.selectedInGroup>=parseFloat(a)&&e.selectedInGroup<=parseFloat(t);if(!B.number(e))return!1;var n=parseFloat(e.value);return n>=parseFloat(a)&&n<=parseFloat(t)},required:function(e){return!(!e.value||!z.trim(e.value))},alpha:function(e){return B.regex(e,/^[a-z ._\-]+$/i)},alphanum:function(e){return B.regex(e,/^[a-z\d ._\-]+$/i)},digit:function(e){return B.regex(e,/^\d+$/)},number:function(e){return B.regex(e,/^[-+]?\d+(\.\d+)?$/)},email:function(e){return B.regex(e,/^([a-zA-Z\d_\.\-\+%])+\@(([a-zA-Z\d\-])+\.)+([a-zA-Z\d]{2,4})+$/)},image:function(e){return B.regex(e,/\.(jpg|jpeg|png|gif|bmp)$/i)},url:function(e){return B.regex(e,/^\b(https?|ftp):\/\/([-A-Z0-9.]+)(\/[-A-Z0-9+&@#\/%=~_|!:,.;]*)?(\?[A-Z0-9+&@#\/%=~_|!:,.;]*)?$/i)},regex:function(e,a,t){return"string"==typeof a&&(a=new RegExp(a,t)),a.test(e.value)},ip4:function(e){return B.regex(e,/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/)},ip6:function(e){return B.regex(e,/^(?:(?:(?:[A-F\d]{1,4}:){5}[A-F\d]{1,4}|(?:[A-F\d]{1,4}:){4}:[A-F\d]{1,4}|(?:[A-F\d]{1,4}:){3}(?::[A-F\d]{1,4}){1,2}|(?:[A-F\d]{1,4}:){2}(?::[A-F\d]{1,4}){1,3}|[A-F\d]{1,4}:(?::[A-F\d]{1,4}){1,4}|(?:[A-F\d]{1,4}:){1,5}|:(?::[A-F\d]{1,4}){1,5}|:):(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)|(?:[A-F\d]{1,4}:){7}[A-F\d]{1,4}|(?:[A-F\d]{1,4}:){6}:[A-F\d]{1,4}|(?:[A-F\d]{1,4}:){5}(?::[A-F\d]{1,4}){1,2}|(?:[A-F\d]{1,4}:){4}(?::[A-F\d]{1,4}){1,3}|(?:[A-F\d]{1,4}:){3}(?::[A-F\d]{1,4}){1,4}|(?:[A-F\d]{1,4}:){2}(?::[A-F\d]{1,4}){1,5}|[A-F\d]{1,4}:(?::[A-F\d]{1,4}){1,6}|(?:[A-F\d]{1,4}:){1,7}:|:(?::[A-F\d]{1,4}){1,7})$/i)},date:function(e,a){if(10==e.value.length&&10==a.length){var t=a.match(/[^mdy]+/g);if(2==t.length&&1==t[0].length&&t[0]==t[1]){for(var n=e.value.split(t[0]),r=a.split(t[0]),i=0;i<3;i++)if("dd"==r[i])var s=n[i];else if("mm"==r[i])var l=n[i];else if("yyyy"==r[i])var o=n[i];var d=new Date(o,l-1,s);return d.getMonth()+1==l&&d.getDate()==s&&d.getFullYear()==o}}return!1},extension:function(){var e=arguments[0],a="";if(!arguments[1])return!1;for(var t=1;t<arguments.length;t++)a+=arguments[t],t!=arguments.length-1&&(a+="|");return B.regex(e,"\\.("+a+")$","i")},ajax:function(e){return e==E.ajaxAnswerValid}},s={trim:function(e){return z.trim(e)}},Z=this;window.bValidatorOptions&&z.extend(!0,E,window.bValidatorOptions),e&&z.extend(!0,E,e);var a=n.data("bValidators");if(a||(a={},n.data("bValidators",a)),n.data("bValidator")){if(!O)return n.data("bValidator");if(a[O])return a[O]}else O||(O="first"),n.data("bValidator",this);a[O]=this,n.is("form")&&(E.validateOnSubmit&&n.bind("submit.bV"+O,function(e){return!!Z.validate(!1,void 0,1)||(E.stopSubmitPropagation?(e.stopImmediatePropagation(),!1):void 0)}),n.bind("reset.bV"+O,function(){Z.reset()})),E.validateOn&&k(r(n)),this.validate=function(I,e,M,P,C){var a,j=!0;if(e)a=e;else{if("true"==n.attr(E.forceValidAttr))return!0;a=r(n)}if(l=null,void 0===P&&!1===$("onBeforeAllValidations",a)||a.each(function(){var e,a=q(z(this).attr(E.validateActionsAttr)),t=q(z(this).attr(E.modifyActionsAttr)),n=-1,r=[],i=0;if(t)for(var s=0;s<t.length;s++)(e=G(t[s])).name&&R(e,this);if(!a)return!0;for(s=0;s<a.length;s++)if((e=G(a[s])).name){if(E.autoModifiers&&E.autoModifiers[e.name])for(var l=0;l<E.autoModifiers[e.name].length;l++)R(G(E.autoModifiers[e.name][l]),this);if("required"==e.name)var o=1;else if("ajax"==e.name)var d=1;if("valempty"==e.name)var u=1;else r[++n]=e}var f,c,m,h=(c=z(this),m={},c.is("input:checkbox")?m.value=c.attr("name")?m.selectedInGroup=_(c).filter(":checked").length:c.attr("checked"):c.is("input:radio")?m.value=c.attr("name")?m.value=z('input:radio[name="'+c.attr("name")+'"]:checked').length:c.val():c.is("select")?(m.selectedInGroup=z("option:selected",c).length,m.value=c.val()):c.is(":input")&&(m.value=c.val()),m),v=[];if(!M&&d&&void 0===P){var g=0;for(s=0;s<r.length&&"ajax"!=r[s].name;s++)if(!S(r[s],this,h)){g=1;break}if(!g&&void 0===(P=D(z(this),O,e.params[0])))return!0}if(E.noMsgIfExistsForInstance.length&&function(e,a){for(var t=0;t<a.length;t++)if(e.data("errMsg.bV"+a[t]))return!0;return!1}(z(this),E.noMsgIfExistsForInstance)&&(I=1),(o||u||B.required(h))&&"true"!=z(this).attr(E.forceValidAttr)||(i=1),!i){var p=z(this).attr(E.errorMessageAttr),b=0;if(z(this).data("checked.bV"+O,1),!1!==$("onBeforeElementValidation",z(this)))for(s=0;s<r.length;s++)if("valempty"!=r[s].name){if((E.validateTillInvalid||C)&&v.length)break;if(!1!==$("onBeforeValidate",z(this),r[s].name)){if("ajax"==r[s].name){if(g)continue;f=M||void 0===P?!!v.length||D(z(this),O,r[s].params[0],1):B.ajax.apply(this,[P])}else f=S(r[s],this,h);if(!1!==$("onAfterValidate",z(this),r[s].name,f))if(f)$("onValidateSuccess",z(this),r[s].name);else{if(I)v[v.length]="";else if(!b){if(p)b=1;else if(E.singleError&&v.length)b=1,p="";else if(E.errorMessages[E.lang]&&E.errorMessages[E.lang][r[s].name])p=E.errorMessages[E.lang][r[s].name];else if(E.errorMessages.en[r[s].name])p=E.errorMessages.en[r[s].name];else{var x=z(this).attr(E.errorMessageAttr+"-"+r[s].name);p=x||(E.errorMessages[E.lang]&&E.errorMessages[E.lang].default?E.errorMessages[E.lang].default:E.errorMessages.en.default)}if(p.indexOf("{"))for(var V=0;V<r[s].params.length;V++)p=p.replace(new RegExp("\\{"+V+"\\}","g"),r[s].params[V]);v.length&&"required"==r[s].name||(v[v.length]=p),p=null}j=!1,$("onValidateFail",z(this),r[s].name,v)}}}var A=$("onAfterElementValidation",z(this),v)}if(!I&&!1!==A&&z(this).data("checked.bV"+O)){var w=z(this).is("input:checkbox,input:radio")?1:0;if(v.length){if(0!==A&&T(z(this),v),w||(z(this).removeClass(E.classNamePrefix+E.validClass),E.errorClass&&z(this).addClass(E.classNamePrefix+E.errorClass)),E.errorValidateOn){E.validateOn&&z(this).unbind(E.validateOn+".bV"+O);var y=w||z(this).is("select,input:file")?"change":E.errorValidateOn;if(w){var F=z(this).is("input:checkbox")?_(z(this)):z('input:radio[name="'+z(this).attr("name")+'"]');z(F).unbind(".bVerror"+O),z(F).bind("change.bVerror"+O,{bVInstance:Z,groupLeader:z(this)},function(e){e.data.bVInstance.validate(!1,e.data.groupLeader)})}else z(this).unbind(".bVerror"+O),z(this).bind(y+".bVerror"+O,{bVInstance:Z},function(e){e.data.bVInstance.validate(!1,z(this))})}}else 0!==A&&N(z(this)),w||(z(this).removeClass(E.classNamePrefix+E.errorClass),E.validClass&&z(this).addClass(E.classNamePrefix+E.validClass)),E.validateOn&&(z(this).unbind(E.validateOn+".bV"+O),k(z(this))),z(this).data("checked.bV"+O,0)}return(!E.singleError&&!C||!1!==j)&&void 0}),$("onAfterAllValidations",a,j),l&&!e&&(z(window).scrollTop()>l||z(window).scrollTop()+z(window).height()<l)){var t=navigator.userAgent.toLowerCase();z(-1<t.indexOf("chrome")||-1<t.indexOf("safari")?"body":"html").animate({scrollTop:l-10},{duration:"slow"})}return j},this.getOptions=function(){return E},this.getValidators=this.getActions=function(){return B},this.getModifiers=function(){return s},this.isValid=function(e){return this.validate(!0,e,1,void 0,!0)},this.removeMsg=this.removeErrMsg=function(e){e.each(function(){N(z(this))})},this.showMsg=function(e,a){e.length&&("string"==typeof a&&(a=[a]),e.each(function(){T(z(this),a)}))},this.getInputs=function(){return r(n)},this.bindValidateOn=function(e){k(e)},this.reset=function(e){e&&e.length||(e=r(n)),E.validateOn&&k(e),e.each(function(){N(z(this)),z(this).unbind(".bVerror"+O),z(this).removeClass(E.classNamePrefix+E.errorClass),z(this).removeClass(E.classNamePrefix+E.validClass),z(this).removeData("ajaxData.bV"+O),z(this).removeData("errMsg.bV"+O),z(this).removeData("checked.bV"+O)})},this.destroy=function(){n.is("form")&&n.unbind(".bV"+O),this.reset(),n.removeData("bValidator"),n.removeData("bValidators")}}}(jQuery);